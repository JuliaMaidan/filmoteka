{"version":3,"file":"static/js/906.c8e8e5e1.chunk.js","mappings":"2IACA,MAA2B,2B,SCQ3B,EAPiB,SAAC,GAAc,IAAZA,EAAW,EAAXA,KAClB,OACE,gBAAKC,UAAWC,EAAhB,UACE,uBAAIF,KAGT,C,+LCPD,GAAgB,UAAY,0BAA0B,OAAS,uBAAuB,cAAgB,8BAA8B,YAAc,4BAA4B,YAAc,4BAA4B,cAAgB,8BAA8B,MAAQ,uB,uCCmH9Q,EArGe,WACb,IAAMG,GAAWC,EAAAA,EAAAA,MAEjB,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAsCF,EAAAA,EAAAA,UAAS,GAA/C,eAAOG,EAAP,KAAoBC,EAApB,KACA,GAAoCJ,EAAAA,EAAAA,UAAS,GAA7C,eAAOK,EAAP,KAAmBC,EAAnB,KACA,GAAkCN,EAAAA,EAAAA,WAAS,GAA3C,eAAOO,EAAP,KAAkBC,EAAlB,MAEAC,EAAAA,EAAAA,YAAU,WAAO,IAAD,EACRC,EAAK,UAAGZ,EAAaa,IAAI,gBAApB,QAAgC,GAC3C,GAAKD,EAAL,CACA,IAAME,EAAmB,mCAAG,oGAExBJ,GAAa,GAFW,UAGKK,EAAAA,EAAAA,IAAkBH,EAAOP,GAH9B,OAGlBW,EAHkB,OAIxBZ,EAAUY,EAAeC,SACzBT,EAAcQ,EAAeE,aAC7BR,GAAa,GANW,kDAQxBS,QAAQC,IAAR,MACAnB,EAAgB,IATQ,0DAAH,qDAYzBa,GAbkB,CAcnB,GAAE,CAACd,EAAcC,EAAiBI,IAEnC,IAAMgB,EAAY,mCAAG,WAAMC,GAAN,gFACXV,EAAUU,EAAVV,MACRf,EAAS,iBAAD,OAAkBe,IAFP,mBAIYG,EAAAA,EAAAA,IAAkBH,EAAOP,GAJrC,OAIXW,EAJW,OAKjBZ,EAAUY,EAAeC,SACzBT,EAAcQ,EAAeE,aANZ,kDASjBC,QAAQC,IAAR,MACAnB,EAAgB,IAVC,0DAAH,sDAkBZsB,EAASC,EAAAA,KAAaC,MAAM,CAChCb,MAAOY,EAAAA,KAEJE,QAAQ,kBAAmB,mCAC3BC,IAAI,GACJC,IAAI,IACJC,aAGL,OACE,iBAAKlC,UAAWC,EAAAA,UAAhB,WACE,eAAID,UAAWC,EAAAA,MAAf,6BACA,SAAC,KAAD,CACEkC,cAAe,CAAElB,MAAO,IACxBmB,iBAAkBR,EAClBS,SAAUX,EAHZ,SAKG,cAAGY,OAAH,EAAWC,QAAX,OACC,UAAC,KAAD,CAAMvC,UAAWC,EAAAA,OAAjB,WACE,SAAC,KAAD,CACED,UAAWC,EAAAA,cACXuC,KAAK,OACLC,KAAK,QACLC,YAAY,cAGd,mBAAQF,KAAK,SAASxC,UAAWC,EAAAA,YAAjC,UACE,SAAC,MAAD,CAAUD,UAAWC,EAAAA,iBAEvB,SAAC,KAAD,CACEwC,KAAK,QACLE,UAAU,MACV3C,UAAWC,EAAAA,kBAfhB,KAqBH,iBAAKD,UAAWC,EAAAA,QAAhB,UACqB,IAAlBO,EAAOoC,SAAgB,SAACC,EAAA,EAAD,CAAU9C,KAAK,uBACtCe,IAAa,SAACgC,EAAA,EAAD,IACbtC,EAAOoC,OAAS,IACf,4BACE,SAACG,EAAA,EAAD,CAAavC,OAAQA,KACrB,SAACwC,EAAA,EAAD,CACEC,MAAOrC,EACPF,YAAaA,EACbwC,iBAnDa,SAACC,EAAOC,GAC/BzC,EAAeyC,EAChB,YAwDF,C","sources":["webpack://filmoteka/./src/components/NotFound/notFound.module.scss?65a4","components/NotFound/NotFound.jsx","webpack://filmoteka/./src/components/styled/search.module.scss?98bc","pages/Search.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"notfound\":\"notFound_notfound__kFEWF\"};","import styles from \"./notFound.module.scss\";\n\nconst NotFound = ({ text }) => {\n  return (\n    <div className={styles.notfound}>\n      <p>{text}</p>\n    </div>\n  );\n};\nexport default NotFound;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"search_container__pes1o\",\"search\":\"search_search__mrQCm\",\"search__input\":\"search_search__input__kz-8x\",\"search__btn\":\"search_search__btn__sjknB\",\"search__svg\":\"search_search__svg__d3LIO\",\"search__error\":\"search_search__error__Ilez7\",\"title\":\"search_title__VyHXl\"};","// import Search from \"../components/Search/Search\";\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useNavigate } from 'react-router';\nimport { getSearchedMovies } from '../services/fetchMovies';\n// import { CiSearch } from 'react-icons/ci';\nimport { BsSearch } from 'react-icons/bs';\nimport NotFound from '../components/NotFound/NotFound';\nimport PostersList from '../components/PostersList/PostersList';\nimport Paginator from '../components/Paginator/Paginator';\nimport styles from '../components/styled/search.module.scss';\nimport Loader from '../components/Loader/Loader';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport * as yup from 'yup';\n\nconst Search = () => {\n  const navigate = useNavigate();\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [movies, setMovies] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const query = searchParams.get('query') ?? '';\n    if (!query) return;\n    const fetchSearchedMovies = async () => {\n      try {\n        setIsLoading(true);\n        const searchedMovies = await getSearchedMovies(query, currentPage);\n        setMovies(searchedMovies.results);\n        setTotalPages(searchedMovies.total_pages);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n        setSearchParams('');\n      }\n    };\n    fetchSearchedMovies();\n  }, [searchParams, setSearchParams, currentPage]);\n\n  const handleSubmit = async values => {\n    const { query } = values;\n    navigate(`/search?query=${query}`);\n    try {\n      const searchedMovies = await getSearchedMovies(query, currentPage);\n      setMovies(searchedMovies.results);\n      setTotalPages(searchedMovies.total_pages);\n      // setIsLoading(true);\n    } catch (error) {\n      console.log(error);\n      setSearchParams('');\n    }\n  };\n\n  const handlePageChange = (event, page) => {\n    setCurrentPage(page);\n  };\n\n  const schema = yup.object().shape({\n    query: yup\n      .string()\n      .matches(/^[a-zA-Z\\s'-]*$/, 'Please, use only letters, -, \".')\n      .min(3)\n      .max(30)\n      .required(),\n  });\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Search by name</h1>\n      <Formik\n        initialValues={{ query: '' }}\n        validationSchema={schema}\n        onSubmit={handleSubmit}\n      >\n        {({ errors, touched }) => (\n          <Form className={styles.search}>\n            <Field\n              className={styles.search__input}\n              type=\"text\"\n              name=\"query\"\n              placeholder=\"search..\"\n              // onChange={handleChange}\n            />\n            <button type=\"submit\" className={styles.search__btn}>\n              <BsSearch className={styles.search__svg} />\n            </button>\n            <ErrorMessage\n              name=\"query\"\n              component=\"div\"\n              className={styles.search__error} // Стилі для відображення помилки\n            />\n          </Form>\n        )}\n      </Formik>\n\n      <div className={styles.wrapper}>\n        {movies.length === 0 && <NotFound text=\"Search by key-word\" />}\n        {isLoading && <Loader />}\n        {movies.length > 0 && (\n          <div>\n            <PostersList movies={movies} />\n            <Paginator\n              count={totalPages}\n              currentPage={currentPage}\n              handlePageChange={handlePageChange}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"],"names":["text","className","styles","navigate","useNavigate","useSearchParams","searchParams","setSearchParams","useState","movies","setMovies","currentPage","setCurrentPage","totalPages","setTotalPages","isLoading","setIsLoading","useEffect","query","get","fetchSearchedMovies","getSearchedMovies","searchedMovies","results","total_pages","console","log","handleSubmit","values","schema","yup","shape","matches","min","max","required","initialValues","validationSchema","onSubmit","errors","touched","type","name","placeholder","component","length","NotFound","Loader","PostersList","Paginator","count","handlePageChange","event","page"],"sourceRoot":""}